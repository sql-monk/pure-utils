{
    "sourceFile": "util/Procedures/metadataSetColumnDescription.sql",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1757963847940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757964185857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n \t\t@name = 'MS_Description',\r\n \t\t@value = @description,\r\n \t\t@level0type = 'SCHEMA',\r\n \t\t@level0name = @schema_name,\r\n-\t\t@level1type = 'OBJECT_OR_COLUMN',\r\n+\t\t@level1type = 'TABLE',\r\n \t\t@level1name = @table_name,\r\n \t\t@level2type = 'COLUMN',\r\n \t\t@level2name = @column;\r\n END;\r\n"
                },
                {
                    "date": 1758022084401,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,31 @@\n+\r\n+CREATE PROCEDURE util.metadataSetColumnDescription \r\n+\t@object NVARCHAR(128),\r\n+\t@column NVARCHAR(128),\r\n+\t@description NVARCHAR(MAX)\r\n+AS\r\n+BEGIN\r\n+\tDECLARE @schName NVARCHAR(128);\r\n+\tDECLARE @objName NVARCHAR(128);\r\n+\tDECLARE @objType NVARCHAR(128);\r\n+\r\n+\tSELECT\r\n+\t\t@schName = SCHEMA_NAME(o.schema_id),\r\n+\t\t@objName = o.name,\r\n+\t\t@objType = t.objectType\r\n+\tFROM sys.objects o(NOLOCK)\r\n+\t\tOUTER APPLY util.metadataGetObjectsType(o.object_id) t\r\n+\tWHERE o.object_id = ISNULL(TRY_CONVERT(INT, @object), OBJECT_ID(@object));\r\n+\t\r\n+\tEXEC util.metadataSetExtendedProperty\r\n+\t\t@name = 'MS_Description',\r\n+\t\t@value = @description,\r\n+\t\t@level0type = 'SCHEMA',\r\n+\t\t@level0name = @schName,\r\n+\t\t@level1type = @objType,\r\n+\t\t@level1name = @objName,\r\n+\t\t@level2type = 'COLUMN',\r\n+\t\t@level2name = @column;\r\n+END;\r\n+GO\r\n+\r\n"
                },
                {
                    "date": 1758024321042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,24 @@\n \r\n+/*\r\n+# Description\r\n+Встановлює опис для колонки таблиці чи представлення через розширені властивості MS_Description.\r\n+\r\n+# Parameters\r\n+@object NVARCHAR(128) - назва таблиці або представлення\r\n+@column NVARCHAR(128) - назва колонки\r\n+@description NVARCHAR(MAX) - текст опису для колонки\r\n+\r\n+# Returns\r\n+Нічого не повертає. Встановлює розширену властивість MS_Description для колонки\r\n+\r\n+# Usage\r\n+-- Встановити опис для колонки таблиці\r\n+EXEC util.metadataSetColumnDescription @object = 'myTable', @column = 'myColumn', @description = 'Опис колонки';\r\n+\r\n+-- Встановити опис для колонки представлення\r\n+EXEC util.metadataSetColumnDescription @object = 'myView', @column = 'calculatedColumn', @description = 'Розрахункова колонка';\r\n+*/\r\n CREATE PROCEDURE util.metadataSetColumnDescription \r\n \t@object NVARCHAR(128),\r\n \t@column NVARCHAR(128),\r\n \t@description NVARCHAR(MAX)\r\n@@ -28,30 +47,4 @@\n \t\t@level2name = @column;\r\n END;\r\n GO\r\n \r\n-USE model; \r\n-GO\r\n-CREATE OR ALTER PROCEDURE [util].[metadataSetColumnDescription]\r\n-\t@major NVARCHAR(128),\r\n-\t@column NVARCHAR(128),\r\n-\t@description NVARCHAR(MAX)\r\n-AS\r\n-BEGIN\r\n-\tDECLARE @schema_name NVARCHAR(128);\r\n-\tDECLARE @table_name NVARCHAR(128);\r\n-\t\r\n-\tSELECT @schema_name = SCHEMA_NAME(o.schema_id), @table_name = o.name\r\n-\tFROM sys.objects o (NOLOCK)\r\n-\tWHERE o.object_id = OBJECT_ID(@major);\r\n-\r\n-\tEXEC util.metadataSetExtendedProperty \r\n-\t\t@name = 'MS_Description',\r\n-\t\t@value = @description,\r\n-\t\t@level0type = 'SCHEMA',\r\n-\t\t@level0name = @schema_name,\r\n-\t\t@level1type = 'TABLE',\r\n-\t\t@level1name = @table_name,\r\n-\t\t@level2type = 'COLUMN',\r\n-\t\t@level2name = @column;\r\n-END;\r\n-GO\n\\ No newline at end of file\n"
                }
            ],
            "date": 1757963847940,
            "name": "Commit-0",
            "content": "USE model; \r\nGO\r\nCREATE OR ALTER PROCEDURE [util].[metadataSetColumnDescription]\r\n\t@major NVARCHAR(128),\r\n\t@column NVARCHAR(128),\r\n\t@description NVARCHAR(MAX)\r\nAS\r\nBEGIN\r\n\tDECLARE @schema_name NVARCHAR(128);\r\n\tDECLARE @table_name NVARCHAR(128);\r\n\t\r\n\tSELECT @schema_name = SCHEMA_NAME(o.schema_id), @table_name = o.name\r\n\tFROM sys.objects o (NOLOCK)\r\n\tWHERE o.object_id = OBJECT_ID(@major);\r\n\r\n\tEXEC util.metadataSetExtendedProperty \r\n\t\t@name = 'MS_Description',\r\n\t\t@value = @description,\r\n\t\t@level0type = 'SCHEMA',\r\n\t\t@level0name = @schema_name,\r\n\t\t@level1type = 'OBJECT_OR_COLUMN',\r\n\t\t@level1name = @table_name,\r\n\t\t@level2type = 'COLUMN',\r\n\t\t@level2name = @column;\r\nEND;\r\nGO"
        }
    ]
}