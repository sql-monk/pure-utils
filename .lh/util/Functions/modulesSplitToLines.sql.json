{
    "sourceFile": "util/Functions/modulesSplitToLines.sql",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1757959848868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757960805247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,17 +4,17 @@\n RETURN(\r\n \tWITH cteLines AS (\r\n \t\tSELECT\r\n \t\t\tsm.object_id,\r\n-\t\t\tTRIM(REPLACE(line.value, CHAR(9), ' ')) codeLine,\r\n+\t\t\tTRIM(REPLACE(line.value, CHAR(9), ' ')) line,\r\n \t\t\tline.ordinal\r\n \t\tFROM sys.sql_modules sm\r\n \t\t\tCROSS APPLY STRING_SPLIT(REPLACE(sm.definition, CHAR(13), CHAR(10)), CHAR(10), 1) line\r\n-\t\tWHERE(@object IS NOT NULL AND @object IN (sm.object_id, OBJECT_NAME(sm.object_id)))\r\n+\t\tWHERE(@object IS NULL OR @object IN (sm.object_id, OBJECT_NAME(sm.object_id)))\r\n \t)\r\n \tSELECT\r\n \t\tcteLines.object_id,\r\n-\t\tcteLines.codeLine,\r\n+\t\tcteLines.line,\r\n \t\tordinal\r\n \tFROM cteLines\r\n-\tWHERE(@skipEmpty = 1 AND LEN(cteLines.codeLine) > 0)\r\n+\tWHERE(@skipEmpty = 0 OR LEN(cteLines.line) > 0)\r\n );\r\n"
                }
            ],
            "date": 1757959848868,
            "name": "Commit-0",
            "content": "CREATE FUNCTION util.modulesSplitToLines(@object NVARCHAR(128), @skipEmpty BIT = 1)\r\nRETURNS TABLE\r\nAS\r\nRETURN(\r\n\tWITH cteLines AS (\r\n\t\tSELECT\r\n\t\t\tsm.object_id,\r\n\t\t\tTRIM(REPLACE(line.value, CHAR(9), ' ')) codeLine,\r\n\t\t\tline.ordinal\r\n\t\tFROM sys.sql_modules sm\r\n\t\t\tCROSS APPLY STRING_SPLIT(REPLACE(sm.definition, CHAR(13), CHAR(10)), CHAR(10), 1) line\r\n\t\tWHERE(@object IS NOT NULL AND @object IN (sm.object_id, OBJECT_NAME(sm.object_id)))\r\n\t)\r\n\tSELECT\r\n\t\tcteLines.object_id,\r\n\t\tcteLines.codeLine,\r\n\t\tordinal\r\n\tFROM cteLines\r\n\tWHERE(@skipEmpty = 1 AND LEN(cteLines.codeLine) > 0)\r\n);\r\n"
        }
    ]
}