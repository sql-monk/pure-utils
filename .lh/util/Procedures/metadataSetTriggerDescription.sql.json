{
    "sourceFile": "util/Procedures/metadataSetTriggerDescription.sql",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1758024320997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1758024320997,
            "name": "Commit-0",
            "content": "/*\r\n# Description\r\nВстановлює опис для тригера через розширені властивості MS_Description.\r\n\r\n# Parameters\r\n@trigger NVARCHAR(128) - назва тригера\r\n@description NVARCHAR(MAX) - текст опису для тригера\r\n\r\n# Returns\r\nНічого не повертає. Встановлює розширену властивість MS_Description для тригера\r\n\r\n# Usage\r\n-- Встановити опис для тригера INSERT\r\nEXEC util.metadataSetTriggerDescription @trigger = 'dbo.tr_Customers_Insert', @description = 'Тригер для логування додавання нових клієнтів';\r\n\r\n-- Встановити опис для тригера UPDATE\r\nEXEC util.metadataSetTriggerDescription @trigger = 'dbo.tr_Orders_Update', @description = 'Тригер для перевірки бізнес-правил при оновленні замовлень';\r\n*/\r\nCREATE PROCEDURE [util].[metadataSetTriggerDescription]\r\n\t@trigger NVARCHAR(128),\r\n\t@description NVARCHAR(MAX)\r\nAS\r\nBEGIN\r\n\tDECLARE @schema_name NVARCHAR(128);\r\n\tDECLARE @table_name NVARCHAR(128);\r\n\tDECLARE @trigger_name NVARCHAR(128);\r\n\t\r\n\tSELECT \r\n\t\t@schema_name = SCHEMA_NAME(parent_obj.schema_id), \r\n\t\t@table_name = parent_obj.name,\r\n\t\t@trigger_name = trigger_obj.name\r\n\tFROM sys.objects trigger_obj (NOLOCK)\r\n\tINNER JOIN sys.objects parent_obj (NOLOCK) ON trigger_obj.parent_object_id = parent_obj.object_id\r\n\tWHERE trigger_obj.object_id = OBJECT_ID(@trigger);\r\n\r\n\tEXEC util.metadataSetExtendedProperty \r\n\t\t@name = 'MS_Description',\r\n\t\t@value = @description,\r\n\t\t@level0type = 'SCHEMA',\r\n\t\t@level0name = @schema_name,\r\n\t\t@level1type = 'TABLE',\r\n\t\t@level1name = @table_name,\r\n\t\t@level2type = 'TRIGGER',\r\n\t\t@level2name = @trigger_name;\r\nEND;\r\nGO"
        }
    ]
}